# 네트워크 애플리케이션 구조

### 종단시스템 간의 애플리케이셔 계층에서 동작
- 라우터, 링크계층스위치 등에서 실행되는 소프트웨어를 작성할 필요 없다.

### 네트워크 애플리케이션의 두 가지 대표적 구조
- client-server, P2P

### 클라이언트-서버(client-server) 구조

- **항상 동작하고 있는 서버가 존재하고, 클라이언트라는 다른 호스트들로부터 서비스 요청을 받는다.**
- 클라이언트는 서로 직접적으로 통신하지 않는다.
- 서버는 잘 알려진 고정 IP 주소를 갖는다.
- 서버가 클라이언트로부터 오는 모든 요청에 더 응답하는 것이 불가능할 때,  
  많은 수의 호스트를 갖춘 데이터 센터가 강력한 가상의 서버를 생성하는 역할로 사용된다. 보통, 10만개 정도의 서버를 갖추고 있다.

<br/>

### P2P 구조

- 항상 켜져있는 인프라스트럭처 서버에 최소로 의존한다. (혹은 의존하지 않는다.)
- 대신에 애플리케이션은 `peer`라는 **간헐적으로 연결된 호스트 쌍이 서로 직접 통신하게 한다.**
- peer는 흔히 알려진 클라이언트(개인 데스크톱과 랩톱 등등)이다.
- 자가 확장성을 가진다. 예를 들어, 파일 공유 애플리케이션에서는 각 피어들이 파일을 요구하여 작업 부하가 생기지만  
  각 피어들은 파일을 다른 피어들에게 분배하여 시스템에 서비스 능력을 갖춘다.
- 데이터 센터 등이 필요 없으므로 비용 효율적이다.

<br/>

## 프로세스 간 통신

프로세스 간 통신(IPC)는 네트워크 상의 서로 다른 프로세스가 서로 통신할 수 있게 해주는 중요한 네트워크 프로그래밍의 한 부분입니다.

## 통신 기본 개념

네트워크를 통한 통신에서 프로세스는 다음과 같은 방식으로 데이터를 교환합니다:

- **클라이언트**: 서비스를 요청하는 주체로서, 서버에 데이터 요청을 보냅니다.
- **서버**: 서비스를 제공하는 주체로서, 클라이언트의 요청에 대해 응답을 보냅니다.

### 소켓의 역할

소켓은 네트워크 통신의 끝점을 나타내며, 통신을 위해 필수적인 객체입니다.

> **소켓(Socket)**: 양방향 통신을 지원하며, 네트워크를 통한 데이터 교환이 이루어지는 인터페이스입니다.

#### 소켓의 주요 기능

1. **데이터 전송 및 수신 인터페이스 제공**:
   - 소켓은 프로세스가 네트워크를 통해 데이터를 송수신할 수 있게 해주는 중요한 API입니다.
   - 프로세스는 소켓을 사용하여 데이터를 보내거나 받을 수 있습니다.

2. **주소 지정 기능**:
   - 각 소켓은 IP 주소와 포트 번호를 사용하여 유일하게 식별됩니다.
   - IP 주소는 네트워크 내의 장치를 식별하고, 포트 번호는 해당 장치 내의 특정 프로세스를 식별하는 데 사용됩니다.

#### 소켓 프로그래밍에서의 사용

- 프로그래머는 소켓 API를 사용하여 네트워크 통신 기능을 구현할 수 있습니다.
- 이를 통해 클라이언트와 서버 간에 효율적인 데이터 교환이 가능해집니다.

### 예시 코드

소켓을 생성하고, IP 주소와 포트 번호를 할당하는 기본적인 코드 예는 다음과 같습니다:

```
python
import socket

# 소켓 생성
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# IP 주소와 포트 번호 할당
sock.bind(('localhost', 8080))

# 서버 시작
sock.listen(1)
```

## 트랜스포트 계층의 서비스

트랜스포트 계층은 다양한 서비스를 제공하여 애플리케이션 계층의 통신을 지원합니다. 이 계층의 주요 서비스는 다음과 같습니다:

### 제공할 수 있는 서비스

- **신뢰성 있는 데이터 전송 (Reliable data transfer)**
  - TCP는 데이터 전송의 신뢰성을 보장합니다. 데이터가 손상되거나 유실될 경우 재전송을 통해 데이터를 정확하게 도달하게 합니다.

- **순서 지킴 (Ordering)**
  - 데이터 패킷들이 전송 순서대로 도착하도록 보장합니다.

- **흐름 제어 (Flow control)**
  - 송신 측과 수신 측의 데이터 처리 속도 차이를 조절하여 수신 측의 버퍼 오버플로를 방지합니다.

- **혼잡 제어 (Congestion control)**
  - 네트워크 내의 데이터 트래픽이 과도할 경우 데이터 전송 속도를 조절하여 네트워크 혼잡을 관리합니다.

- **멀티플렉싱 (Multiplexing)**
  - 여러 애플리케이션에서 보낸 데이터를 하나의 트랜스포트 계층 프로토콜을 통해 전송합니다.

### 제공하지 않는 서비스

- **암호화**
  - 트랜스포트 계층은 데이터 암호화를 직접 제공하지 않습니다. 암호화는 보통 애플리케이션 계층 또는 네트워크 계층의 SSL/TLS와 같은 프로토콜을 통해 처리됩니다.

- **시간 보장 서비스 (Guaranteed timing)**
  - 실시간 애플리케이션에 필수적인 시간 보장 서비스는 트랜스포트 계층에서 제공되지 않습니다.

### TCP와 UDP

- **TCP (Transmission Control Protocol)**
  - 연결 지향적이며 신뢰성 있는 데이터 전송을 제공합니다.
  - 데이터 전송 전에 연결 설정을 통한 핸드셰이킹이 필요합니다.

- **UDP (User Datagram Protocol)**
  - 비연결 지향적이며 최소한의 서비스만을 제공합니다.
  - 빠르지만 신뢰성이 낮고 순서가 보장되지 않습니다.

이러한 서비스는 트랜스포트 계층이 네트워크에서 어떤 역할을 수행하는지를 명확하게 이해하는 데 도움을 줍니다.
