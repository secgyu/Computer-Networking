# 🔄 ARQ (Automatic Repeat reQuest) 상세 설명

## 📝 개요
ARQ(Automatic Repeat reQuest)는 데이터 통신에서 신뢰성 있는 데이터 전송을 보장하기 위해 사용되는 오류 제어 메커니즘입니다. ARQ는 데이터 프레임이나 패킷이 손실되거나 손상되었을 때 자동으로 재전송하는 방식을 사용합니다.

## 🔍 주요 특징
1. **오류 검출**: 수신된 데이터에서 오류를 검출하기 위해 패리티 비트, 체크섬, CRC(Cyclic Redundancy Check) 등을 사용합니다.
2. **확인 응답(ACK)**: 수신자가 올바르게 수신한 데이터를 송신자에게 알리기 위해 ACK를 전송합니다.
3. **부정 응답(NAK)**: 수신자가 오류를 검출한 데이터를 송신자에게 알리기 위해 NAK를 전송합니다.
4. **타임아웃**: 송신자가 특정 시간 내에 ACK를 받지 못하면, 데이터를 재전송합니다.

## 📦 ARQ의 주요 유형

### 🛑 Stop-and-Wait ARQ
- **개요**: 송신자가 하나의 프레임을 전송한 후, 수신자로부터 ACK를 받을 때까지 기다리는 방식입니다.
- **동작 원리**: 송신자는 프레임을 전송하고, ACK를 받을 때까지 기다립니다. 타임아웃이 발생하거나 NAK를 받으면 해당 프레임을 재전송합니다.

```plaintext
Stop-and-Wait ARQ 과정

1. 송신자: 프레임 0 전송
2. 수신자: 프레임 0 수신 후 ACK 0 전송
3. 송신자: ACK 0 수신 후 프레임 1 전송
4. 수신자: 프레임 1 수신 후 ACK 1 전송
5. 송신자: ACK 1 수신 후 프레임 2 전송
...
```
## 🔄 Go-Back-N ARQ
- **개요**: 송신자가 여러 프레임을 연속적으로 전송하고, 오류가 발생한 프레임 이후의 모든 프레임을 재전송하는 방식입니다.
- **동작 원리**: 송신자는 윈도우 크기만큼의 프레임을 연속적으로 전송합니다. 수신자는 오류가 없는 프레임에 대해 ACK를 전송하고, 오류가 있는 프레임 이후의 모든 프레임을 버리고 NAK를 전송합니다. 송신자는 NAK를 받거나 타임아웃이 발생하면 해당 프레임 이후의 모든 프레임을 재전송합니다.

```plaintext
Go-Back-N ARQ 과정

1. 송신자: 프레임 0, 1, 2, 3 전송
2. 수신자: 프레임 0, 1 수신 후 ACK 0, ACK 1 전송
3. 수신자: 프레임 2 오류 검출 후 NAK 2 전송
4. 송신자: NAK 2 수신 후 프레임 2, 3 재전송
...
```

## ✅ Selective Repeat ARQ
- **개요**: 송신자가 여러 프레임을 연속적으로 전송하고, 오류가 발생한 프레임만을 선택적으로 재전송하는 방식입니다.
- **동작 원리**: 송신자는 윈도우 크기만큼의 프레임을 연속적으로 전송합니다. 수신자는 오류가 없는 프레임에 대해 ACK를 전송하고, 오류가 있는 프레임만 NAK를 전송합니다. 송신자는 NAK를 받으면 해당 프레임만 재전송합니다.

```plaintext
Selective Repeat ARQ 과정

1. 송신자: 프레임 0, 1, 2, 3 전송
2. 수신자: 프레임 0, 1 수신 후 ACK 0, ACK 1 전송
3. 수신자: 프레임 2 오류 검출 후 NAK 2 전송
4. 송신자: NAK 2 수신 후 프레임 2만 재전송
5. 수신자: 프레임 2 수신 후 ACK 2 전송
6. 송신자: ACK 2 수신 후 프레임 3 전송
...
```

** 🔧 ARQ의 흐름 제어
*** 🛑 Stop-and-Wait ARQ 흐름 제어
- **장점**: 구현이 간단하고 이해하기 쉬움.
- **단점**: 전송 효율이 낮음. 송신자가 매번 ACK를 기다려야 하므로 대기 시간이 길어짐.

*** 🔄 Go-Back-N ARQ 흐름 제어
- **장점**: 전송 효율이 Stop-and-Wait ARQ보다 높음. 여러 프레임을 연속적으로 전송할 수 있음.
- **단점**: 오류가 발생하면 해당 프레임 이후의 모든 프레임을 재전송해야 하므로 불필요한 데이터 재전송이 발생할 수 있음.

*** ✅ Selective Repeat ARQ 흐름 제어
- **장점**: 전송 효율이 가장 높음. 오류가 발생한 프레임만 재전송하므로 불필요한 데이터 재전송이 없음.
- **단점**: 구현이 복잡하고, 송신자와 수신자 모두에서 버퍼를 유지해야 함.

** 💬 ARQ 사용 사례
ARQ는 신뢰성 있는 데이터 전송이 필요한 다양한 네트워크 프로토콜에서 사용됩니다.   
예를 들어, **TCP(Transmission Control Protocol)**, **HDLC(High-Level Data Link Control)**, **PPP(Point-to-Point Protocol)** 등이 있습니다.

** ⚖️ ARQ 유형 비교
| **특징** | **Stop-and-Wait ARQ** | **	Go-Back-N ARQ** | **Selective Repeat ARQ** |
| --- | --- | --- | --- |
| **전송 효율** | 낮음 | 중간 | 높음 |
| **오류 발생 시 재전송** | 단일 프레임 | 오류 발생 프레임 이후 모든 프레임 | 오류 발생 프레임만 | 
| **구현 복잡** | 낮음 | 중간 | 높음 | 
| **버퍼 요구사** | 낮음 | 중간 | 높음 | 
