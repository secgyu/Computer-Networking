# 🌐 링크 계층 (Link Layer)

링크 계층은 OSI 모델의 두 번째 계층으로, 물리 계층과 네트워크 계층 사이에서 동작합니다. 이 계층의 주요 기능은 데이터 전송의 신뢰성을 보장하고, 물리적인 네트워크를 통해 데이터를 전송하는 것입니다.

## 📌 링크 계층 개요

**링크 계층**:
- **브로드캐스트 채널**: 다수의 노드가 공유하는 통신 채널입니다.
- **점대점 통신 링크**: 두 개의 인접 노드 간의 직접적인 통신 링크입니다.

**노드 (Node)**:
- 링크 계층 프로토콜을 실행하는 장치들로, 예를 들어 호스트, 라우터, 스위치, WiFi AP 등이 있습니다.

**링크 (Link)**:
- 인접한 노드들을 연결하는 통신 채널입니다.

### 링크 계층 제공 서비스

1. **프레임화 (Framing)**:
   - 송신 노드는 데이터그램을 링크 계층 프레임으로 캡슐화하여 링크로 전송합니다.

2. **링크 접근 (Link Access)**:
   - MAC (Medium Access Control) 프로토콜에서 링크로 프레임을 전송하는 규칙을 명시합니다.

3. **신뢰적 전달 (Reliable Delivery)**:
   - TCP와 같이 ACK와 재전송을 통해 신뢰적 전달을 수행합니다.
   - 주로 오류율이 높은 무선 링크에서 사용되며, 유선 링크에서는 주로 제공되지 않습니다.

4. **오류 검출 및 정정 (Error Detection and Correction)**:
   - 트랜스포트 계층이나 네트워크 계층의 체크섬보다 더 복잡한 오류 검출 및 정정 기법이 하드웨어로 구현됩니다.

## 🛠️ 링크 계층의 주요 기능

### 1. 오류 검출 및 정정

- **오류 검출 및 정정 비트 (EDC, Error Detection and Correction bits)**: 데이터에 추가되어 송신 측과 수신 측에서 데이터를 검사합니다.
- **패리티 검사 (Parity Check)**: 단일 비트 오류를 검출하는 간단한 방법으로, 짝수 패리티와 홀수 패리티가 있습니다.
  - **짝수 패리티 (Even Parity)**: 데이터 비트에 패리티 비트를 추가하여 전체 비트의 수가 짝수가 되도록 합니다.
  - **2차원 패리티 검사 (Two-dimensional Parity Check)**: 단일 비트 오류뿐만 아니라, 다중 비트 오류도 검출할 수 있는 방법입니다.
  - **장점**: 구현이 간단하고, 단일 비트 오류를 효율적으로 검출할 수 있습니다.
  - **단점**: 다중 비트 오류를 검출하기 어렵고, 짝수 개수의 오류는 검출할 수 없습니다.

- **순환중복검사 (CRC, Cyclic Redundancy Check)**: 송수신 측이 동일한 다항식 코드를 사용하여 데이터를 검출하고 정정합니다.
  - **다항식 코드 (Polynomial Code)**: 특정한 고정 길이 비트열로, 생성자 (Generator)라고도 합니다.
  - **모듈로-2 연산**: 비트 단위 XOR 연산으로 오류를 검출합니다.
  - **장점**: 매우 높은 오류 검출 능력을 가집니다.
  - **단점**: 구현이 복잡하고, 추가적인 계산이 필요합니다.

### 2. MAC 주소와 ARP

- **MAC 주소 (Media Access Control Address)**: 링크 계층에서 사용되는 물리 주소로, 6바이트(48비트)로 구성됩니다.
  - 첫 3바이트는 제조사 식별자이며, 브로드캐스트 주소는 FF-FF-FF-FF-FF-FF입니다.
  - **예시**: 02-A5-73-B1-82-23 (유니캐스트 주소), FF-FF-FF-FF-FF-FF (브로드캐스트 주소)

- **ARP (Address Resolution Protocol)**: IP 주소에 대응하는 MAC 주소를 찾기 위해 사용됩니다.
  - **ARP 요청 (ARP Request)**: 송신 호스트가 ARP 요청 메시지를 서브넷에 브로드캐스트하면, 목적지 호스트는 ARP 응답 메시지를 유니캐스트로 송신 호스트에게 보냅니다.
  - **ARP 응답 (ARP Reply)**: 수신된 MAC 주소를 ARP 테이블에 갱신합니다.
  - **예시**: 
    - ARP 요청: "누가 IP 주소 192.168.1.1을 가지고 있습니까? 제 MAC 주소는 22-22-22-22-22-22입니다."
    - ARP 응답: "192.168.1.1은 제가 가지고 있습니다. 제 MAC 주소는 33-33-33-33-33-33입니다."

### 3. 이더넷 (Ethernet)

- **이더넷**: IEEE 802.3 표준에 의해 정의된 기술로, 링크 계층 및 물리 계층에 대한 명세가 포함됩니다.
  - **CSMA/CD (Carrier Sense Multiple Access with Collision Detection)**: 매체 접근 제어 기법으로, 충돌을 감지하고 충돌이 발생하면 재전송을 시도합니다.
  - **이더넷 프레임 포맷**: 프리앰블, SFD(Start Frame Delimiter), 목적지 주소, 출발지 주소, 타입, 데이터, 패딩, CRC로 구성됩니다.
    - **프리앰블**: 7바이트의 10101010 패턴
    - **SFD**: 1바이트의 10101011 패턴
    - **목적지 주소**: 6바이트의 MAC 주소
    - **출발지 주소**: 6바이트의 MAC 주소
    - **타입**: 상위 계층 프로토콜을 식별하는 2바이트
    - **데이터**: 46~1500바이트의 페이로드
    - **패딩**: 최소 프레임 크기를 맞추기 위한 패딩
    - **CRC**: 4바이트의 오류 검출 코드

- **이더넷 기술**:
  - **10Base-T**: 10Mbps 전송 속도를 가지는 기술.
  - **100Base-TX**: 100Mbps 전송 속도를 가지는 Fast Ethernet.
  - **1000Base-T**: 1Gbps 전송 속도를 가지는 Gigabit Ethernet.
  - **10GBase-T**: 10Gbps 전송 속도를 가지는 10 Gigabit Ethernet.
  - **특징**: 각각의 기술은 전송 속도와 사용되는 매체에 따라 다릅니다. 예를 들어, 10Base-T는 비차폐 꼬임쌍선을 사용하고, 10GBase-T는 고속 전송을 위해 차폐 꼬임쌍선을 사용합니다.

### 4. 스위치 기반 네트워크

- **스위치 (Switch)**: 링크 계층에서 동작하며, 프레임을 교환합니다. 스위치는 목적지 MAC 주소에 따라 프레임을 전달하거나 필터링합니다.
  - **자가 학습 (Self-learning)**: 스위치는 수신된 프레임의 출발지 MAC 주소와 인터페이스를 학습하여 스위치 테이블을 갱신합니다.
  - **플러그 앤 플레이 (Plug and Play)**: 스위치는 별도의 설정 없이도 네트워크에 연결되면 자동으로 동작합니다.
  - **전이중 모드 (Full-duplex mode)**: 스위치와 연결된 장치들은 동시에 송수신이 가능합니다.
  - **예시**: 
    - 프레임이 수신되면, 스위치는 출발지 주소와 인터페이스를 스위치 테이블에 저장합니다.
    - 목적지 주소가 테이블에 없으면, 프레임을 모든 포트로 브로드캐스트합니다.
    - 목적지 주소가 테이블에 있으면, 해당 포트로 프레임을 전달합니다.

