# 📡 무선 네트워크 (Wireless Network)

무선 네트워크는 물리적 케이블 없이 무선 전파를 통해 데이터를 전송하는 네트워크입니다. 여기서는 주로 WiFi 802.11 표준에 대해 다룹니다.

## 1. 무선 LAN: 개요

**WiFi 802.11 wireless LAN**:
- IEEE 802.11 워킹그룹에서 무선 LAN 관련 표준 담당.
- 동일한 매체 접속 프로토콜로 CSMA/CA 사용.
- 동일한 링크 계층 프레임 구조 사용.
- 모든 802.11 제품들은 이전 표준기술과 호환.
- 두 개 서로 다른 주파수 영역(2.4 ~ 2.485 GHz, 5.1 ~ 5.8 GHz)에서 동작.
- 2.4 GHz 대역은 비허가 주파수 영역으로, 802.11 기기들은 무선전화 및 전자레인지와 경쟁.
- 5 GHz 대역은 동일 전력 수준에서 전송거리가 더 짧고 다중 경로 전파 영향을 많이 받음.
- 802.11n 및 802.11ac는 MIMO(Multiple-Input Multiple-Output) 안테나 사용. 송수신 측 각각 2개 이상 안테나 있음.

| 표준   | 주파수     | 최대 전송률 | 연도  |
| ------ | ---------- | ------------ | ----- |
| 802.11 | 2.4 GHz    | 2 Mbps       | 1997  |
| 802.11b| 2.4 GHz    | 11 Mbps      | 1999  |
| 802.11a| 5 GHz      | 54 Mbps      | 1999  |
| 802.11g| 2.4 GHz    | 54 Mbps      | 2003  |
| 802.11n| 2.4/5 GHz  | 600 Mbps     | 2008  |
| 802.11ac| 5 GHz     | 6.9 Gbps     | 2014  |

## 2. 무선 LAN: 구조

**802.11 구조**:
- **BSS (Basic Service Set)**: 하나 이상의 무선 스테이션과 하나의 중앙기지국 (Access Point, AP)으로 이루어진 802.11의 기본 구성 단위.
- **인프라스트럭처 무선랜**: AP가 있는 BSS를 기반 구조(infrastructure) 네트워크라고 하며, 스테이션 A가 B로 데이터 전송 시 A는 AP로 프레임을 전송하고 AP가 B로 전송함.
- **애드혹 네트워크 (Ad Hoc Network)**: AP가 없는 BSS를 IBSS (Independent BSS) 또는 애드혹 네트워크라고 하며, IBSS 내 스테이션들은 서로 독립적으로 통신.
- **ESS (Extended Service Set)**: AP를 가진 2개 이상의 BSS로 구성된 무선 네트워크.
- **MAC 주소**: 이더넷처럼 802.11 무선 스테이션은 6바이트 MAC 주소를 가지며 AP도 무선 인터페이스에 대한 MAC 주소를 가짐.

## 3. 무선 LAN: 채널과 결합

**802.11 채널과 결합**:
- 802.11 무선 단말기는 프레임 송수신 전에 AP와 결합되어 있어야 함.
- AP는 설치 시 SSID (Service Set Identifier) 및 채널 번호 할당.
- AP는 SSID와 MAC 주소가 포함된 비컨 프레임(beacon frame)을 주기적으로 전송하고, 무선 스테이션은 주변 AP로부터 비컨 프레임을 찾기 위해 채널을 검사함.

### 결합 방식
- **수동적 스캐닝 (Passive Scanning)**: 무선 호스트가 주변 AP들로부터의 비컨 프레임을 수신한 후, 하나의 AP에게 결합 요청 메시지를 전송하고 결합 수락 메시지를 수신.
- **능동적 스캐닝 (Active Scanning)**: 무선 호스트가 영역 내 AP들에게 탐사용 프로브(probe) 프레임을 방송하면, AP들은 프로브 응답 프레임을 전송하고, 무선 호스트는 하나의 AP에게 결합 요청 메시지를 전송하고 결합 수락 메시지를 수신.

## 4. 무선 LAN: 매체 접근 제어 개요

**매체 접근 제어 (MAC)**:
- **DCF (Distributed Coordinated Function)**: CSMA/CA 기법을 사용하며 경쟁을 통해 채널 접근을 제어. 충돌이 발생할 수 있어 비실시간 데이터 전송에 적합.
- **PCF (Point Coordinated Function)**: AP에 의한 폴링(polling) 방식으로, AP가 중앙집중방식으로 매체 접근을 제어. 충돌이 발생하지 않아 실시간 트래픽 서비스에 유리.

## 5. CSMA/CA

**CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance)**:
- AP와 결합된 스테이션은 AP와 프레임 송수신 가능.
- 다중접속 프로토콜로 CSMA/CA 사용.
- 충돌검출 대신 충돌회피 기술 사용.
- 상대적으로 높은 비트 오류율을 고려하여 링크 계층 ARQ 방식(ACK 및 재전송) 사용.

### 동작 원리
1. **캐리어 감지**: 전송할 프레임이 있는 스테이션은 프레임 전송 전 채널 사용 여부를 감지.
2. **백오프 절차**: 캐리어가 사용 중이면 DIFS 시간 이후 랜덤 백오프 시간 동안 대기 후 채널이 비면 프레임 전송.
3. **프레임 전송**: 백오프 타이머가 0이 되면 프레임 전송 후 ACK를 기다림. ACK 미수신 시 더 증가된 범위 내 임의 값 선택 후 다시 백오프 절차 수행.

## 6. 숨겨진 단말 문제

**숨겨진 단말 문제 (Hidden Terminal Problem)**:
- 두 노드 A와 B가 서로의 신호를 감지할 수 없는 경우 발생.
- A가 AP로 프레임 전송 중 B가 채널을 감지하여 idle로 판단하고 프레임을 전송하여 충돌 발생.
- 해결 방법: RTS/CTS 프레임 교환을 통한 채널 접근 사전 예약 방식.

### RTS/CTS 프레임 교환
1. 송신자는 짧은 RTS 프레임을 AP에게 전송.
2. AP는 RTS 수신 후 짧은 CTS 프레임을 송신자에게 전송하여 채널 사용 허가.
3. RTS/CTS 프레임에는 채널 사용 예상 시간이 포함됨.
4. 다른 노드들은 CTS 내 명시된 시간 동안 채널 접근을 하지 않음.

## 7. IEEE 802.11 프레임 구조

**IEEE 802.11 프레임 구조**:
- **Frame Control**: 프레임 타입과 제어 정보를 포함.
- **Duration**: 프레임 전송 시간.
- **Address 1-4**: 송신자, 수신자, AP 등의 MAC 주소.
- **Sequence Control**: 프레임 순서 제어.
- **Payload**: 실제 데이터.
- **CRC**: 오류 검출을 위한 체크섬.

