# 📡 CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance)

CSMA/CA는 무선 네트워크에서 다중 노드가 공유 매체에 접근할 때 충돌을 방지하고 효율적으로 데이터를 전송하기 위해 사용되는 프로토콜입니다. CSMA/CA는 충돌을 감지하는 대신 충돌을 회피하는 데 중점을 둡니다.

## 📚 기본 개념

**CS (Carrier Sense)**: 노드는 데이터를 전송하기 전에 공유 매체를 감지하여 다른 노드가 데이터를 전송 중인지 확인합니다.

**MA (Multiple Access)**: 여러 노드가 동일한 전송 매체를 공유합니다.

**CA (Collision Avoidance)**: 데이터 전송 전에 충돌을 회피하기 위한 절차를 수행합니다.

## 🛠️ 작동 원리

1. **캐리어 감지 (Carrier Sensing)**:
   - 노드는 데이터를 전송하기 전에 매체를 감지하여 다른 노드가 데이터를 전송 중인지 확인합니다.
   - 매체가 유휴 상태이면 데이터 전송을 시작합니다.
   - 매체가 사용 중이면 일정 시간 기다렸다가 다시 감지합니다.

2. **백오프 절차 (Backoff Procedure)**:
   - 매체가 사용 중이면 노드는 랜덤 백오프 시간을 기다립니다.
   - 백오프 타이머는 매체가 유휴 상태일 때만 감소합니다.
   - 백오프 타이머가 0이 되면 데이터를 전송합니다.

3. **프레임 전송 (Frame Transmission)**:
   - 매체가 유휴 상태인 경우, 노드는 데이터를 전송합니다.
   - 데이터 전송 중에도 노드는 지속적으로 매체를 감지하여 충돌이 발생하는지 확인합니다.

4. **충돌 회피 (Collision Avoidance)**:
   - 데이터를 전송하기 전에 RTS(Request to Send)와 CTS(Clear to Send) 프레임을 교환하여 채널을 예약합니다.
   - 이 과정을 통해 숨겨진 단말 문제를 해결하고 충돌을 회피할 수 있습니다.

## 📊 동작 단계

1. **채널 감지 (Channel Sensing)**:
   - 노드는 DIFS(Distributed InterFrame Space) 시간 동안 채널을 감지합니다.
   - 채널이 유휴 상태이면 데이터 전송을 시작합니다.
   - 채널이 사용 중이면 백오프 절차를 수행합니다.

2. **백오프 절차 (Backoff Procedure)**:
   - 랜덤 백오프 타이머를 설정하고 타이머가 0이 될 때까지 대기합니다.
   - 백오프 타이머는 채널이 유휴 상태일 때만 감소합니다.
   - 타이머가 0이 되면 데이터를 전송합니다.

3. **RTS/CTS 교환 (RTS/CTS Exchange)**:
   - 송신자는 RTS 프레임을 전송하여 채널 사용을 요청합니다.
   - 수신자는 CTS 프레임을 전송하여 채널 사용을 허가합니다.
   - 다른 노드들은 CTS 프레임을 수신하면 해당 시간 동안 채널 접근을 하지 않습니다.

4. **데이터 전송 (Data Transmission)**:
   - 송신자는 데이터를 전송하고 수신자는 이를 수신하여 ACK(Acknowledgment) 프레임을 송신자에게 보냅니다.
   - 송신자가 ACK 프레임을 수신하면 데이터 전송이 완료됩니다.

## 📋 예시

1. **채널 감지**: 노드 A는 데이터를 전송하기 전에 채널을 감지합니다.
2. **백오프**: 채널이 사용 중이면 노드 A는 랜덤 백오프 타이머를 설정하고 대기합니다.
3. **RTS 전송**: 타이머가 0이 되면 노드 A는 RTS 프레임을 노드 B에게 전송합니다.
4. **CTS 수신**: 노드 B는 RTS를 수신하고 CTS 프레임을 노드 A에게 전송합니다.
5. **데이터 전송**: 노드 A는 데이터를 전송하고, 노드 B는 데이터를 수신한 후 ACK 프레임을 노드 A에게 전송합니다.
6. **전송 완료**: 노드 A는 ACK를 수신하고 데이터 전송을 완료합니다.

## 🌟 CSMA/CA의 장단점

**장점**:
- 충돌을 미리 회피하여 데이터 전송의 효율성을 높입니다.
- 숨겨진 단말 문제를 RTS/CTS 프레임 교환으로 해결할 수 있습니다.

**단점**:
- RTS/CTS 프레임 교환으로 인한 오버헤드가 발생합니다.
- 랜덤 백오프 시간으로 인해 전송 지연이 발생할 수 있습니다.

CSMA/CA는 무선 네트워크에서 다중 노드가 동시에 매체에 접근할 때 발생할 수 있는 충돌을 효과적으로 회피하여 데이터 전송의 신뢰성과 효율성을 높이는 데 중요한 역할을 합니다.
